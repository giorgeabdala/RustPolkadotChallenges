# Challenge 7: Basic Macros (Simplified)

**Estimated Time:** 30 minutes  
**Difficulty:** Medium  
**Topics:** Declarative Macros, Pattern Matching, Simple Code Generation

## Learning Objectives

By completing this challenge, you will understand:
- Declarative macros with `macro_rules!`
- Basic pattern matching in macros
- Simple code generation patterns
- Token substitution and repetition

## Background

Macros enable code generation at compile time. This simplified version focuses on the essential patterns used in Substrate development.

## Challenge

Create 2 basic macros for generating simple getters and events.

### Data Types

```rust
#[derive(Debug, Clone, PartialEq)]
struct User {
    name: String,
    age: u32,
}

#[derive(Debug, Clone, PartialEq)]
enum Event {
    UserCreated { name: String, age: u32 },
    UserUpdated { name: String, new_age: u32 },
}
```

### Your Implementation

#### **1. Getter Macro:**
```rust
// TODO: Implement this macro
macro_rules! create_getter {
    ($field:ident, $field_type:ty) => {
        // IMPLEMENT:
        // Generate: fn $field(&self) -> &$field_type { &self.$field }
        todo!()
    };
}
```

#### **2. Event Builder Macro:**
```rust
// TODO: Implement this macro  
macro_rules! event {
    ($variant:ident { $($field:ident: $value:expr),* }) => {
        // IMPLEMENT:
        // Generate: Event::$variant { $field: $value, ... }
        todo!()
    };
}
```

### Expected Usage

```rust
// Using the getter macro
impl User {
    create_getter!(name, String);
    create_getter!(age, u32);
}

let user = User { name: "Alice".to_string(), age: 25 };
let name = user.name();  // Generated by macro
let age = user.age();    // Generated by macro

// Using the event macro
let created_event = event!(UserCreated { name: "Alice".to_string(), age: 25 });
let updated_event = event!(UserUpdated { name: "Bob".to_string(), new_age: 30 });
```

### Tests to Implement

```rust
#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_getter_macro() {
        // TODO: Implement this test
        // 1. Create User with test data
        // 2. Use generated getter methods
        // 3. Verify they return correct references
        todo!()
    }

    #[test] 
    fn test_event_macro() {
        // TODO: Implement this test
        // 1. Create events using event! macro
        // 2. Verify they match expected Event enum variants
        todo!()
    }
}
```

## Key Learning Points

- **Declarative macros**: Use `macro_rules!` for code generation
- **Pattern matching**: `$name:ident` for identifiers, `$expr:expr` for expressions
- **Repetition**: `$(...)*` for handling variable arguments
- **Code generation**: Macros create code at compile time

## Substrate Connection

Substrate uses macros extensively:
- `#[pallet::storage]` generates storage items
- `#[pallet::event]` generates event enums
- `#[pallet::call]` generates dispatchable functions

This simplified version teaches the essential macro patterns used throughout Substrate!
